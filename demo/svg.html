<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      html,
      body {
        margin: 0;
        height: 100%;
      }
      .operation-panel {
        position: fixed;
        left: 10px;
        width: 40px;
        height: 400px;
        border: 3px solid rebeccapurple;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <div class="operation-panel"></div>
    <!-- viewBox="0 0 100 100" -->
    <!--  -->
    <svg
      id="svg"
      version="1.1"
      width="100%"
      height="100%"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g id="gg" data-x="50" data-y="50" transform="translate(50, 50)">
        <rect rx="20" width="200" height="200" />
      </g>

      <!-- <g transform="translate( 400 9002 )">
        <circle cx="10" cy="100" r="30" fill="green" />
      </g> -->

      <!-- <g transform="translate( 400 92 )">
        <ellipse cx="75" cy="75" rx="20" ry="20" />
      </g> -->
      <!-- <line
        x1="10"
        x2="50"
        y1="110"
        y2="150"
        fill="none"
        stroke="blue"
        stroke-width="5"
      />
      <path
        d="M20,230 Q40,205 50,230 T90,230"
        fill="none"
        stroke="blue"
        stroke-width="5"
      />
      <polyline
        points="60 110, 65 120, 70 115, 75 130, 80 125, 85 140, 90 135, 95 150, 100 145"
        fill="none"
        stroke="blue"
        stroke-width="5"
      />
      <polygon
        points="50 160, 55 180, 70 180, 60 190, 65 205, 50 195, 35 205, 40 190, 30 180, 45 180"
        fill="none"
        stroke="blue"
      /> -->
      <!-- <text x="150" y="125" font-size="60" text-anchor="middle" fill="white">
        SVG
      </text> -->

      <!-- <path d="M10 10" /> -->

      <!-- Points -->
      <!-- <circle cx="10" cy="10" r="2" fill="red" />

      <path d="M10 10 H 80 V 90 H 6 Z" fill="transparent" stroke="black" />

      <path d="M10 20 h 80 v 100 h -80 Z" fill="transparent" stroke="red" /> -->
    </svg>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script>
      const threshold = 3.5;
      //参考百度脑图，通过transform wheel 滚动
      const el = document.getElementById("svg");
      const gg = document.getElementById("gg");

      el.addEventListener(
        "wheel",
        function (e) {
          // console.log(e.wheelDeltaX, e.wheelDeltaY);
          // console.log(gg.getAttribute("data-x"), "gg.attributes");
          const dataX =
            gg.getAttribute("data-x") * 1 + Math.floor(e.wheelDeltaX / 3.5);
          const dataY =
            gg.getAttribute("data-y") * 1 + Math.floor(e.wheelDeltaY / 3.5);

          gg.setAttribute("data-x", dataX);
          gg.setAttribute("data-y", dataY);
          gg.setAttribute("transform", `translate( ${dataX} ${dataY} )`);
        },
        false
      );

      // el.addEventListener("mousedown", (e) => {
      //   console.log(e);
      // });

      // el.addEventListener("mousemove", (e) => {
      //   console.log(e);
      // });
    </script>
  </body>
</html>
